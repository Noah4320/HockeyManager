@model Game

<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
    $(document).ready(function () {

         var gameId = @Context.Request.Query["gameId"];

        $.ajax({
            type: "GET",
            url: "https://localhost:44375/Season/HomeTeam",
            contentType: "application/json",
            data: {
                gameId: gameId
            }
        }).done(function (roster) {
            $("#refRosterTable").html(roster);
        }).fail(function (x) {
            alert(x.responseText);

        });

     });
    $(document).on("[name='filterDropdown']")
        .change(function () {

            var team = $("#Team").val();
            var gameId = @Context.Request.Query["gameId"];

            if (team == "HomeTeam") {
                $.ajax({
                    type: "GET",
                    url: "https://localhost:44375/Season/HomeTeam",
                    contentType: "application/json",
                    data: {
                        gameId: gameId
                    }
                }).done(function (roster) {
                    $("#refRosterTable").html(roster);
                }).fail(function (x) {
                    alert(x.responseText);

                });
            } else {
                $.ajax({
                    type: "GET",
                    url: "https://localhost:44375/Season/AwayTeam",
                    contentType: "application/json",
                    data: {
                        gameId: gameId
                    }
                }).done(function (roster) {
                    $("#refRosterTable").html(roster);
                }).fail(function (x) {
                    alert(x.responseText);

                });
            }
        })

    $(document).on('click', '#simPeriod', function () {
        var gameId = @Context.Request.Query["gameId"];
        $.ajax({
            type: "GET",
            url: "https://localhost:44375/Season/SimPeriod",
            data: {
                gameId: gameId
            }
        }).done(function (x) {
            location.reload();
        }).fail(function (x) {
            alert(x.responseText);

        });
    });

     $(document).on('click', '#simGame', function () {
        var gameId = @Context.Request.Query["gameId"];
        $.ajax({
            type: "GET",
            url: "https://localhost:44375/Season/FinishGame",
            data: {
                gameId: gameId
            }
        }).done(function (x) {
            alert(x);
        }).fail(function (x) {
            alert(x.responseText);

        });
    });

</script>

<div class="text-center">
    <div class="row">
        <div class="col">
            <h3>Events</h3>

            <select class="form-control">
                <option value="End">End</option>
                <option value="1st Period">1st Period</option>
                <option value="2nd Period">2nd Period</option>
            </select>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Event</th>
                        <th>Player</th>
                        <th>Time</th>
                        <th>Period</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div class="col">
            <h3>@Model.AwayTeam.TeamInfo.Abbreviation: 0  @Model.HomeTeam.TeamInfo.Abbreviation: 0</h3>

            <h4>1st Period</h4>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th></th>
                        <th>@Model.AwayTeam.TeamInfo.Name</th>
                        <th> @Model.HomeTeam.TeamInfo.Name</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Shots</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>Goals</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>

            <input type="submit" class="btn btn-warning" id="simPeriod" value="Simulate Period" />
            <input type="submit" class="btn btn-success" id="simGame" value="Finish Game" />

        </div>
        <div class="col">
            <h3>Rosters</h3>

            <select class="form-control" name="filterDropdown" id="Team">
                <option value="HomeTeam">@Model.HomeTeam.TeamInfo.Abbreviation</option>
                <option value="AwayTeam">@Model.AwayTeam.TeamInfo.Abbreviation</option>
            </select>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Position</th>
                        <th>Name</th>
                        <th>G</th>
                        <th>A</th>
                        <th>P</th>
                        <th>H</th>
                        <th>+/-</th>
                        <th>OVR</th>

                    </tr>
                </thead>
                <tbody id="refRosterTable">
                </tbody>
            </table>
        </div>
    </div>
</div>